<% views = @comment.commentable.class.to_s.downcase.pluralize; %>
var panel = $("#<%= render_comment_id(@comment.commentable) %>");

<% if @comment.errors.any? %>
    panel.find('form').replaceWith($('<%= j render partial: "comments/form", :locals => {:comment => @comment} %>'));
<% else %>
    panel.find('form').before($('<%= j render partial: "comments/item", locals: {comment: @comment} %>'));
    panel.find('form')[0].reset();
<% end %>